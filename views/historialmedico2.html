<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Historial Médico - Memoria Médica</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/HistorialMedico2.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const usuario = localStorage.getItem('usuarioNombre');
      if (!usuario) {
        Swal.fire({
          icon: "warning",
          title: "Acceso no autorizado",
          text: "Debes iniciar sesión para acceder a esta página",
          confirmButtonText: "Ir al login"
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = "login.html";
          }
        });
      }
    });
  </script>
</head>

<body>

  <!-- NAVBAR -->
  <div class="navbar">
    <h2>Memoria Médica</h2>
    <div class="nav-links">
      <a href="index.html"><i class="bi bi-house me-2"></i>Inicio</a>
      <a href="registroCitas.html"><i class="bi bi-calendar-plus me-2"></i>Registrar Cita</a>
      <a href="historialmedico.html"><i class="bi bi-file-medical me-2"></i>Historial de Citas</a>
    </div>
  </div>

  <!-- CONTENIDO -->
  <div class="container">
    <h1>Historial Médico</h1>

    <!-- BÚSQUEDA -->
    <div class="search-bar">
      <input type="text" id="busqueda" placeholder="Buscar por identificación del paciente...">
    </div>

    <div class="table-container">
      <table id="tablaHistorialMedico" class="styled-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Nombre Paciente</th>
            <th>Nombre Médico</th>
            <th>Edad</th>
            <th>Problemas</th>
            <th>Identificación</th>
            <th>Tratamiento</th>
            <th>Detalles</th>
            <th>Medicamentos</th>
            <th>Gravedad</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </div>
  </div>

  <!-- MODAL DE DETALLES -->
  <div class="modal" id="modalDetalle">
    <div class="modal-content">
        <span class="close" onclick="cerrarModal()">&times;</span>
        <h2>Detalles del Historial Médico</h2>
        
        <div class="form-grid">
            <div class="form-group">
                <label for="detallePaciente">Paciente:</label>
                <input type="text" id="detallePaciente" name="detallePaciente" readonly>
            </div>

            <div class="form-group">
                <label for="detalleMedico">Médico:</label>
                <input type="text" id="detalleMedico" name="detalleMedico" readonly>
            </div>

            <div class="form-group">
                <label for="detalleEdad">Edad:</label>
                <input type="number" id="detalleEdad" name="detalleEdad" readonly>
            </div>

            <div class="form-group">
                <label for="detalleIdentificacion">Identificación:</label>
                <input type="text" id="detalleIdentificacion" name="detalleIdentificacion" readonly>
            </div>

            <div class="form-group">
                <label for="detalleProblemas">Problemas:</label>
                <textarea id="detalleProblemas" name="detalleProblemas" rows="2"></textarea>
            </div>

            <div class="form-group">
                <label for="detalleTratamiento">Tratamiento:</label>
                <input type="text" id="detalleTratamiento" name="detalleTratamiento">
            </div>

            <div class="form-group">
                <label for="detalleDetalles">Detalles:</label>
                <textarea id="detalleDetalles" name="detalleDetalles" rows="3"></textarea>
            </div>

            <div class="form-group">
                <label for="detalleMedicamentos">Medicamentos:</label>
                <textarea id="detalleMedicamentos" name="detalleMedicamentos" rows="2"></textarea>
            </div>

            <div class="form-group">
                <label for="detalleGravedaPaciente">Gravedad del Paciente:</label>
                <select id="detalleGravedaPaciente" name="detalleGravedaPaciente">
                    <option value="Estable">Estable</option>
                    <option value="Seguimiento">Seguimiento</option>
                    <option value="Critico">Crítico</option>
                </select>
            </div>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <button class="btn-reporte" onclick="guardarCambios()">
                <i class="bi bi-save me-2"></i>Actualizar Reporte
            </button>
        </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/assets/js/historialmedico2.js"></script>
</body>
</html>